<html>
<head>
	<script language="javascript" type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
	<script>
		var xpos=50,ypos=0;
		var isPressed=false;
		var playerHeight=40;
		$(document).ready(function(){
			$("body").keydown(function(e) {
				isPressed=true;
			});
			$("body").keyup(function(e) {
				isPressed=false;
			});
			movePlayerDown();
			movePlayerUp();
			function movePlayerUp(){
				if(isPressed&&ypos>0){
					ypos-=3;
				}
				setTimeout(movePlayerUp,15);
			}
			function movePlayerDown(){
				if(!isPressed&&ypos<window.innerHeight-playerHeight){
					ypos+=3;
				}
				setTimeout(movePlayerDown,15);
			}
		});
	</script>
	<style>
		#myCanvas{
			margin:0px;
			padding: 0px;
		}
		html, body{
			margin:0px;
			padding: 0px;
		}
	</style>
</head>
<body>
	<canvas id="myCanvas"></canvas>
	<script>
	//	var lifes=[5][2];//5 lifes
	//	1  2  3  4  5
	//x	maxX
	//y	0-maxY
		var c = document.getElementById("myCanvas");
        var ctx = c.getContext("2d");
        ctx.fillStyle = "#FF0000";
		
		canvas = document.getElementById("myCanvas");
		canvas.width = window.innerWidth; //document.width is obsolete
		canvas.height = window.innerHeight; //document.height is obsolete
		var maxX = canvas.width;
		var maxY = canvas.height;
		
		var lifes_length=5;//TODO: aus datei lesen -> kommt noch fgt
		var lifes=new Array(lifes_length);
		var lifesStarted=new Array(lifes_length);
		//lifes array mit werten f√ºllen
		for(var i=0;i<lifes_length;i++){
			lifes[i]=new Array(2);
			lifes[i][0]=maxX;
		}
		for(var i=0;i<lifes_length;i++){
			var lHeight=Math.round(Math.random()*maxY);
			lifes[i][1]=lHeight;
		}
		
		
		var player = new Image();

		player.onload = function() {
			ypos=maxY/2;
			ctx.drawImage(player, xpos, ypos);
		};
		player.src = 'player.png';
		var time=new Date().getMilliSeconds();
		updateScreen();
		
		function updateScreen(){
			ctx.clearRect(0,0,maxX,maxY);
			ctx.drawImage(player, xpos,ypos);
			
			if(time+(Math.round(Math.random()*5000)+2000)<new Date().getMilliSeconds()){//TODO: funzt ned :P
				time=new Date().getMilliSeconds();
				alert("yoo");
				startLifes();
			}
			moveLifes();
			setTimeout(updateScreen,10);
		}
		function startLifes(){
			var number=Math.round(Math.random()*lifes_length);
			lifesStarted[number]=true;
		}
		function moveLifes(){
			for(var i=0;i<lifes_length;i++){
				if(lifesStarted[i]){
					lifes[i][0]-=5;
				}
			}
		}
	</script>
</body>
</html>